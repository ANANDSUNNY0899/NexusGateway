<!-- 
#  NexusGateway

**The Intelligent, Semantic-Caching AI Infrastructure Layer.**

> **Live Demo:** [https://nexusgateway.onrender.com](https://nexusgateway.onrender.com)  
> **Status:**  Production Ready (Multi-Tenant SaaS)

---

## Overview

**NexusGateway** is a high-performance middleware designed to optimize Large Language Model (LLM) applications. It solves the two biggest problems in AI development: **Latency** and **Cost**.

Instead of sending every request blindly to OpenAI, NexusGateway uses **Vector Embeddings** to understand the *meaning* of a user's query. If a similar question has been asked before, it serves the answer instantly from the edge cache, bypassing the expensive AI call.

**It acts as a complete Micro-SaaS backend, handling Authentication, Rate Limiting, and Usage-Based Billing via Stripe.**

---

## Tech Stack & Architecture

This project implements a modern, scalable, distributed system architecture:

*   **Core Backend:** **Go (Golang)** — Chosen for high concurrency and low latency.
*   **Hot Caching (L1):** **Redis (Upstash)** — Sub-millisecond exact-match caching and rate limiting.
*   **Semantic Memory (L2):** **Pinecone** — Vector Database for AI semantic search (Cosine Similarity).
*   **Database:** **PostgreSQL (Supabase)** — Relational storage for User Auth, Keys, and Usage Quotas.
*   **Billing Engine:** **Stripe** — Full checkout flow and Webhook handling for automated upgrades.
*   **AI Engine:** **OpenAI** — GPT-3.5/4 integration with Embedding generation.
*   **Infrastructure:** **Render** — Dockerized cloud deployment.

---

## Key Features

### 1. Smart Semantic Caching
Unlike traditional caches that only match exact strings, NexusGateway understands intent.
*   *Query A:* "How do I make tea?"
*   *Query B:* "Recipe for tea"
*   **Result:** Nexus detects these are 95% similar and serves the cached answer to Query B instantly. **Cost: $0. Latency: <50ms.**

###  2. Rate Limiting & Security
*   **Token Bucket Algorithm:** Prevents API abuse (Redis-backed).
*   **Auth Middleware:** Custom Bearer Token authentication.
*   **Usage Tracking:** Tracks every request in Postgres. Automatically blocks users who exceed their free tier (100 requests).

###  3. Automated SaaS Billing
*   **Integrated Stripe Checkout:** Users can upgrade plans seamlessly.
*   **Webhook Listener:** Listens for `checkout.session.completed` events to automatically unlock account limits in the database.
*   **Zero-Touch Ops:** No manual database updates required.

###  4. Real-Time Analytics Dashboard
*   A Cyberpunk-styled frontend showing live stats:
    *   Total Requests.
    *   Cache Hits vs. Misses.
    *   **Real-time $$ Saved calculator.**

---

##  API Documentation

### **1. Register User**
Get a unique API Key to start using the gateway.
*   **Endpoint:** `POST /api/register`
*   **Body:** `{ "email": "user@example.com" }`
*   **Response:** `{ "api_key": "nk-8f7a..." }`

### **2. Chat with AI (The Core)**
Send your prompt to the gateway.
*   **Endpoint:** `POST /api/chat`
*   **Headers:** `Authorization: Bearer <YOUR_API_KEY>`
*   **Body:** `{ "message": "What is the capital of France?" }`
*   **Response Headers:**
    *   `X-Cache: HIT-SEMANTIC` (If served from Vector DB)
    *   `X-Cache: MISS` (If generated by OpenAI)

### **3. Upgrade Plan (Stripe)**
Get a payment link to unlock higher limits.
*   **Endpoint:** `POST /api/checkout`
*   **Headers:** `Authorization: Bearer <YOUR_API_KEY>`
*   **Response:** `{ "checkout_url": "https://checkout.stripe.com/..." }`

---

##  Local Development Setup

1.  **Clone the Repo**
    ```bash
    git clone https://github.com/YOUR_USERNAME/NexusGateway.git
    cd NexusGateway
    ```

2.  **Install Dependencies**
    ```bash
    go mod tidy
    ```

3.  **Configure Environment**
    Create a `run.bat` (Windows) or `.env` file with your keys:
    ```bash
    set OPENAI_API_KEY=sk-...
    set REDIS_URL=rediss://default:...
    set PINECONE_API_KEY=pcsk_...
    set PINECONE_HOST=index-name.svc.pinecone.io
    set DB_URL=postgresql://postgres:...@pooler.supabase.com:6543/postgres
    set STRIPE_SECRET_KEY=sk_test_...
    set STRIPE_WEBHOOK_SECRET=whsec_...
    ```

4.  **Run the Server**
    ```bash
    run.bat
    # OR
    go run main.go
    ```

---

##  System Design Flow

1.  **Incoming Request** → **Middleware** (Check Auth & Rate Limit).
2.  **Quota Check** → Query **Supabase**: "Does user have credits?"
    *   *If No:* Return `402 Payment Required`.
3.  **Cache Check** → Query **Pinecone**: "Do we have a vector match > 85% similarity?"
    *   *If Yes:* Return cached JSON immediately.
4.  **LLM Call** → If no cache, forward to **OpenAI**.
5.  **Write Back** → Save the new answer and vector to **Pinecone** for future users.
6.  **Billing** → Async increment user usage count in **Supabase**.

---

##  Credits

Built by **SUNNY ANAND**.
*   *Engineered with Go, fueled by coffee.* 

--- -->




<div align="center">

#  Nexus Gateway
### High-Performance AI Semantic Caching & Monetization Layer

![Go](https://img.shields.io/badge/Go-1.21+-00ADD8?style=for-the-badge&logo=go)
![Redis](https://img.shields.io/badge/redis-%23DD0031.svg?style=for-the-badge&logo=redis&logoColor=white)
![Supabase](https://img.shields.io/badge/Supabase-3ECF8E?style=for-the-badge&logo=supabase&logoColor=white)
![Stripe](https://img.shields.io/badge/Stripe-5433FF?style=for-the-badge&logo=stripe&logoColor=white)
![Pinecone](https://img.shields.io/badge/Pinecone-Vector_DB-black?style=for-the-badge)

[Live Demo](https://nexus-frontend-livid.vercel.app/) · [Report Bug](https://github.com/ANANDSUNNY0899/NexusGateway/issues) · [Request Feature](https://github.com/ANANDSUNNY0899/NexusGateway/issues)

</div>

---

##  Overview

**Nexus Gateway** is an intelligent middleware designed to sit between your users and Large Language Models (LLMs) like OpenAI. It solves the three biggest problems in AI Engineering today: **Cost, Latency, and Scalability.**

By using **Vector Embeddings (OpenAI text-embedding-3)** and **Cosine Similarity Search**, Nexus understands the *context* of a user's question. If a similar question has been asked before, it serves the cached response instantly from **Pinecone/Redis**, bypassing the expensive LLM call entirely.

##  Key Features

###  Performance & Cost
- **Semantic Caching:** Recognizes that "How do I make tea?" and "Recipe for tea" are the same question. Serves cached answers in **<50ms**.
- **Multi-Layer Storage:** Hot cache in **Redis** (L1) and Vector storage in **Pinecone** (L2).
- **Cost Reduction:** Proven to reduce OpenAI token usage by up to **90%** for repetitive workloads.

###  Security & Scalability
- **Rate Limiting:** Token-bucket algorithm (Redis) to prevent abuse (e.g., 100 requests/limit).
- **Multi-Tenant Auth:** Secure user management via **Supabase (PostgreSQL)**. users generate their own `nk-` API keys.
- **Stateless Architecture:** Fully containerized Go binary deployed on **Render Cloud**.

###  Monetization (SaaS Ready)
- **Automated Billing:** Integrated **Stripe Checkout** for plan upgrades.
- **Webhooks:** Real-time account upgrades via Stripe Webhooks.
- **Usage Tracking:** Tracks every token and request per user.

---

##  System Architecture

```mermaid
graph TD
    User["Client App / User"] -->|1. Request with API Key| Go["Nexus Gateway (Go)"]
    Go -->|2. Check Rate Limit| Redis[("Redis Cache")]
    Go -->|3. Check Auth & Quota| DB[("Supabase Postgres")]
    
    Go -->|4. Generate Embedding| OAI["OpenAI Embeddings API"]
    
    Go -->|5. Semantic Search| Pine[("Pinecone Vector DB")]
    
    Pine -- "Hit (>0.90 Score)" --> Go
    Pine -- Miss --> LLM["OpenAI GPT-4"]
    
    LLM --> Go
    Go -->|6. Cache Result| Pine
    Go --> User
``` 

Getting Started
Prerequisites Go 1.21+ Redis Instance (Upstash/Local) PostgreSQL (Supabase/Local) API Keys (OpenAI, Pinecone, Stripe) Installation Clone the Repo code Bash git clone https://github.com/ANANDSUNNY0899/NexusGateway.git cd NexusGateway Setup Environment Create a .env file or set variables in your terminal: code Bash export OPENAI_API_KEY="sk-..." export REDIS_URL="rediss://..." export PINECONE_API_KEY="pcsk_..." export PINECONE_HOST="index-name.svc.pinecone.io" export DB_URL="postgresql://..." export STRIPE_SECRET_KEY="sk_test_..." Run the Server code Bash go run main.go

API Endpoints
Method Endpoint Description Auth Required POST /api/register Create a new user & get API Key ❌ No POST /api/chat Send prompt to AI (Cached) ✅ Yes POST /api/checkout Generate Stripe Payment Link ✅ Yes GET /api/stats View global savings stats ❌ No

Future Roadmap
Multi-Model Support: Route to Anthropic/Claude and Google Gemini.

Dashboard V2: Visual charts for usage history.

SDK: Python and Node.js wrappers for easier integration. Built with ❤️ by Sunny Anand